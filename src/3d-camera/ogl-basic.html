<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ogl Basic</title>
</head>
<body>
  <script src="../common/lib/gl-renderer.js"></script>
  <canvas width="512" height="512"></canvas>
  <script type="module">
    const vertex = `
      attribute vec3 a_vertexPosition;
      attribute vec4 color;
      attribute vec3 normal;
      varying vec4 vColor;
      varying float vCos;
      uniform mat4 projectionMatrix;
      uniform mat4 modelMatrix;
      uniform mat3 normalMatrix;
      uniform mat4 viewMatrix;
      
      const vec3 lightPosition = vec3(1, 0, 0);
      void main() {
        gl_PointSize = 1.0;
        vColor = color;
        vec4 pos = viewMatrix * modelMatrix * vec4(a_vertexPosition, 1.0);
        vec4 lp = viewMatrix * vec4(lightPosition, 1.0);
        vec3 invLight = lp.xyz - pos.xyz;
        vec3 norm = normalize(normalMatrix * normal);
        vCos = max(dot(normalize(invLight), norm), 0.0);
        gl_Position = projectionMatrix * pos;
      }
    `;
    const fragment = `
      #ifdef GL_ES
      precision highp float;
      #endif
      uniform vec4 lightColor;
      varying vec4 vColor;
      varying float vCos;
      void main() {
        gl_FragColor.rgb = vColor.rgb + vCos * lightColor.a * lightColor.rgb;
        gl_FragColor.a = vColor.a;
      }
    `;

    import {Renderer, Camera, Transform, Program, Sphere, Box, Cylinder, Torus, Mesh} from '../common/lib/ogl/index.mjs';

    const canvas = document.querySelector('canvas');
    const renderer = new Renderer({
      canvas,
      width: 512,
      height: 512,
    });

    const gl = renderer.gl;
    gl.clearColor(1, 1, 1, 1);

    const camera = new Camera(gl, {fov: 35});
    camera.position.set(0, 1, 7);
    camera.lookAt([0, 0, 0]);

    
  </script>
</body>
</html>